@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

<ul class="navbar-nav">
   @if (SignInManager.IsSignedIn(User))
   {
      <li>
         <form class="form-inline" action="/Identity/Account/Manage" method="get">
            <button type="submit" class="nav-link btn btn-link my" id="topUser"></button>
         </form>
      </li>
      <li>
         <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Page("/", new { area = "" })" method="post">
            <button type="submit" class="nav-link btn btn-link ">Logout</button>
         </form>
      </li>

   }
   else
   {
      <li class="nav-item">
         <a class="nav-link" asp-page="/My/Register">Register</a>
      </li>
      <li class="nav-item">
         <a class="nav-link" asp-area="Identity" asp-page="/Account/Login">Login</a>
      </li>
   }
</ul>
<div class="align-content-end" style="margin-left: 15px;">
   <a href="#" onclick="ToggleTheme()"><i class="fa fa-moon-o"></i></a>
</div>
@if (SignInManager.IsSignedIn(User))
{
   <script>
        $(document).ready(function () {
             $.get({
                 url: "/api/getdisplayedname/@User.Identity.Name" , success: function (result) {
                    $("#topUser").html("<i class='fas fa-cog'></i> " + result);
                 }
             })
        });
        function loadProfile()
        {
        $(document).load("/Identity/Account/Manage/");
        }
   </script>
}